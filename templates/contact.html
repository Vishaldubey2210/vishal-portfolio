{% extends 'base.html' %}

{% block title %}Contact | Vishal Kumar{% endblock %}

{% block content %}
<section class="py-5 mt-5">
    <div class="container">
        <!-- Header -->
        <div class="text-center mb-5" data-aos="fade-up">
            <h1 class="display-3 fw-bold gradient-text mb-3">Get In Touch</h1>
            <p class="lead text-muted">Have a question or want to work together?</p>
        </div>

        <div class="row g-5">
            <!-- Contact Form -->
            <div class="col-lg-7" data-aos="fade-right">
                <div class="glass-effect p-5">
                    <h3 class="gradient-text mb-4">Send Me a Message</h3>
                    <form id="contact-form">
                        <div class="mb-4">
                            <label class="form-label text-white">Name *</label>
                            <input type="text" name="name" class="form-control" required placeholder="Your Name">
                        </div>

                        <div class="mb-4">
                            <label class="form-label text-white">Email *</label>
                            <input type="email" name="email" class="form-control" required placeholder="your.email@example.com">
                        </div>

                        <div class="mb-4">
                            <label class="form-label text-white">Subject</label>
                            <input type="text" name="subject" class="form-control" placeholder="Subject">
                        </div>

                        <div class="mb-4">
                            <label class="form-label text-white">Message *</label>
                            <textarea name="message" class="form-control" rows="6" required placeholder="Your message here..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-paper-plane me-2"></i>Send Message
                        </button>

                        <div id="contact-message" class="mt-3"></div>
                    </form>
                </div>
            </div>

            <!-- Contact Info -->
            <div class="col-lg-5" data-aos="fade-left">
                <div class="glass-effect p-5 mb-4">
                    <h3 class="gradient-text mb-4">Contact Information</h3>
                    
                    <div class="mb-4">
                        <div class="d-flex align-items-start mb-3">
                            <i class="fas fa-envelope fa-2x text-primary me-3"></i>
                            <div>
                                <h5 class="text-white mb-1">Email</h5>
                                <a href="mailto:vishaldubey221005@gmail.com" class="text-muted text-decoration-none">
                                    vishaldubey221005@gmail.com
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="d-flex align-items-start mb-3">
                            <i class="fas fa-map-marker-alt fa-2x text-primary me-3"></i>
                            <div>
                                <h5 class="text-white mb-1">Location</h5>
                                <p class="text-muted mb-0">India</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="d-flex align-items-start">
                            <i class="fas fa-clock fa-2x text-primary me-3"></i>
                            <div>
                                <h5 class="text-white mb-1">Response Time</h5>
                                <p class="text-muted mb-0">Usually within 24 hours</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Social Links -->
                <div class="glass-effect p-5">
                    <h4 class="text-white mb-4">Follow Me</h4>
                    <div class="row g-3">
                        <div class="col-6">
                            <a href="https://github.com/Vishaldubey2210" target="_blank" 
                               class="btn btn-outline-primary w-100">
                                <i class="fab fa-github me-2"></i>GitHub
                            </a>
                        </div>
                        <div class="col-6">
                            <a href="https://www.linkedin.com/in/vishal-kumar-a57a08290" target="_blank" 
                               class="btn btn-outline-primary w-100">
                                <i class="fab fa-linkedin me-2"></i>LinkedIn
                            </a>
                        </div>
                        <div class="col-6">
                            <a href="https://www.kaggle.com/vishaldubey1234567" target="_blank" 
                               class="btn btn-outline-primary w-100">
                                <i class="fab fa-kaggle me-2"></i>Kaggle
                            </a>
                        </div>
                        <div class="col-6">
                            <a href="https://leetcode.com/u/OaLgTnrNHf/" target="_blank" 
                               class="btn btn-outline-primary w-100">
                                <i class="fas fa-code me-2"></i>LeetCode
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.getElementById('contact-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = new FormData(e.target);
        const messageDiv = document.getElementById('contact-message');
        const submitBtn = e.target.querySelector('button[type="submit"]');
        
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            subject: formData.get('subject'),
            message: formData.get('message')
        };
        
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
        
        try {
            const response = await fetch('/api/contact', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            
            const result = await response.json();
            
            if (result.success) {
                messageDiv.innerHTML = `
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle me-2"></i>${result.message}
                    </div>
                `;
                e.target.reset();
            } else {
                messageDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle me-2"></i>Failed to send message. Please try again.
                    </div>
                `;
            }
        } catch (error) {
            messageDiv.innerHTML = `
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-circle me-2"></i>An error occurred. Please try again later.
                </div>
            `;
        } finally {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane me-2"></i>Send Message';
        }
    });
</script>
{% endblock %}
